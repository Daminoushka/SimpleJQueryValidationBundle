<script type="text/javascript">
$(document).ready(function() {
    var formId = '{{ form.vars.id }}';
    var form = $('#' + formId);
    
    form.validate({
    	onfocusout: function(element) { $(element).valid(); },
        errorClass: 'form-error'
    });

    {% for field in form.vars.form.children %}
        {% if constraints[field.vars.name] is defined %}
            {% for constraint in constraints[field.vars.name] %}
                {% autoescape false %}
                    {{ '$("#' ~ field.vars.id ~ '").rules("add",' ~ constraint ~ ');' }}
                {% endautoescape %}
            {% endfor %}
        {% endif %}
    {% endfor %}
});
</script>